{% extends 'base.html.twig' %}

{% block title %}Projets
{% endblock %}

{% block body %}

	<h1>Projets</h1>

	<div class="uk-container uk-margin-large-top">
		<div class="uk-flex uk-flex-center">
			<div
				class="uk-width-4-5@l uk-width-3-4@m uk-width-1-1@s">

				{# Grid avec fade-in progressif #}
				<div class="uk-child-width-1-1@s uk-child-width-1-2@m uk-child-width-1-3@l uk-grid-small uk-flex-center" uk-grid uk-scrollspy="target: > div; cls: uk-animation-fade; delay: 150; repeat: false">

					{% for project in projects %}
						<div>
							<div
								class="uk-card uk-card-default uk-overflow-hidden uk-border-rounded uk-box-shadow-small">

								{# Image #}
								<div class="project-img-wrapper">
									{% if project.image %}
										<img src="{{ asset('assets/images/uploads/' ~ project.image) }}" alt="{{ project.title }}" class="project-img" loading="lazy">
									{% else %}
										<div class="uk-placeholder uk-text-center" style="height:180px; display:flex; align-items:center; justify-content:center;">
											<span>Aucune image</span>
										</div>
									{% endif %}
								</div>

								<div class="uk-card-body uk-text-center">
									<h4 class="uk-margin-small-top">{{ project.title }}</h4>
									<p class="uk-text-muted">{{ project.description|raw }}</p>

									{% if project.links is not empty %}
										<ul class="uk-list uk-list-small uk-text-left">
											{% for link in project.links %}
												<li class="uk-flex uk-flex-middle">
													<img src="{{ asset('assets/images/logo/' ~ link.type ~ '.png') }}" alt="{{ link.type }}" width="24" height="24" style="margin-right: 8px;" onerror="this.src='{{ asset('icons/default.png') }}'">
													<a href="{{ link.path }}" target="_blank" class="uk-link-muted" rel="noopener noreferrer">
														{{ link.type|capitalize }}
													</a>
												</li>
											{% endfor %}
										</ul>
									{% endif %}


									{% if is_granted('ROLE_ADMIN') %}
										<hr class="uk-divider-icon">
										<div class="uk-flex uk-flex-center uk-margin-medium-top">
											<a href="{{ path('app_project_edit', {'id': project.id}) }}" class="uk-button-primary uk-button-small uk-border-pill uk-box-shadow-hover-small">Modifier</a>
										</div>
									{% endif %}
								</div>
							</div>
						</div>
					{% endfor %}

				</div>
			</div>
		</div>
		{% if is_granted('ROLE_ADMIN') %}
			<div class="uk-flex uk-flex-center uk-margin-medium-top">
				<a href="{{ path('app_project_new') }}" class="uk-button-primary uk-button-small uk-border-pill uk-box-shadow-hover-small">
					Ajouter
				</a>
			</div>
		{% endif %}
	</div>
	<div class="action-buttons">
		<a href="{{ path('app_summary') }}" class="uk-button uk-button-default uk-border-pill uk-box-shadow-hover-small action-btn">
			Retour au sommaire
		</a>
	</div>

{% endblock %}
